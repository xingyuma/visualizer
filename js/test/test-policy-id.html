<?xml version = "1.0" encoding="utf-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"DTD/xhtml1-strict.dtd">
<!-- 
	See COPYING for copyright and distribution information.
-->
<html xmlns = "http://www.w3.org/1999/xhtml">

<head>    
	<title>Visualizer</title>

    <script type="text/javascript" src="../build/ndn.js"></script>
    <script type="text/javascript" src="../Policy.js"></script>
    <link rel="stylesheet" type="text/css" href="./bootstrap.css" />
    <link rel="stylesheet" type="text/css" href="./layout.css" />
    
    
	<script type="text/javascript">
        var policy = new Policy();
        policy.addPolicyEntry(new PolicyEntry("/aa/bb/1.txt:/aa/bb/ID-CERT"));
        policy.addPolicyEntry(new PolicyEntry("/aa/bb/ID-CERT:/aa/ID-CERT"));
        policy.addPolicyEntry(new PolicyEntry("/aa/ID-CERT:/aa/ID-CERT"));
        function addAPolicy() {
            
        }
        function showPolicy(){
            var tb = document.getElementById("mytable");
            for (var i =  tb.rows.length -1; i >= 1; i--) {
                tb.deleteRow(i);
            }
            for (var i = 0 ; i < policy.PolicyStore.length; i++) {
                var table=document.getElementById("mytable");
                var row=table.insertRow(-1);
                var cell1=row.insertCell(0);
                var cell2=row.insertCell(1);
                cell1.innerHTML=policy.PolicyStore[i].prefix;
                cell2.innerHTML=policy.PolicyStore[i].authority;
            }
        }
        
        function search() { 
//            console.log("aaadfas");
            var id = IdentityVerifySingleton.getInstance();
            id.init("/aa/bb/1.txt",policy);
//            document.getElementById('result').innerHTML = "dsfads";
//            console.log(id.chain);
        }
	</script>
	

</head>
<body >
    <div id="HEADER">
        <div class="page-header">
            <h1>Visualizer</h1>
        </div>
    </div>
    
    <div id="WRAPPER">
        <div id="SIDE">
            <h3>Chain Visualization</h3>
            <div class="BOX">
                <input id = "query" type="text" class="form-control" style="width: 200px;">
                    <button  type="submit" class="btn btn-default" onclick="search()">Submit</button>
                    </div>
            <div class="BOX" id = "resultarea">
                
            </div>

            
        </div>
        
        <div id="CONTENT">
            <h3>Policy </h3>
            <div class="BOX">
                <input id = "addPolicy" type="text" class="form-control" style="width: 200px;">
                    <button  type="submit" class="btn btn-default ">Add Policy</button>
                    <button  type="submit" class="btn btn-default" onclick="showPolicy()">Show Policy</button>
                    </textarea>
                    </div>
            <div class="BOX">
                <table id="mytable" cellspacing="0">
                    <tr>
                        <th scope="col" >Data Prefix</th>
                        <th scope="col" >Key Locator</th>
                    </tr>
                    </div>
        </div>
    </div>
    
    <div id="hidDiv" style="position: absolute; display: none; ">
        <div class="alert alert-success">Policy Error</div>
    </div>
    
</body>

</html>
