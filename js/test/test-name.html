<!DOCTYPE HTML>
<head>
    <meta charset="utf-8">
    <title>Name object test</title>
	
    <script src="../build/ndn.js"></script>
    <script type="text/javascript" src="../Policy.js"></script>
    <script type="text/javascript" src="../regex.js"></script>
    <script type="text/javascript" src="../xml/xml2json.js"></script>
    <script type="text/javascript" src="../xml/json2xml.js"></script>
        <script type="text/javascript" src="../xml/jsonxmllib.js"></script>


    <script>
    function testName () {
        console.log("\\1\\2");
        var s = "<IdentityPolicy><DataRegex>^(&lt;aa&gt;)(&lt;bb&gt;*)</DataRegex><SignerRegex>(&lt;aa&gt;)&lt;&gt;*&lt;ID-CERT&gt;</SignerRegex><Op>&gt;=</Op><DataExpand>\\1\\2</DataExpand><SignerExpand>\\1\\2</SignerExpand><MustVerify>1</MustVerify></IdentityPolicy>";
        var parser=new DOMParser();
        xmlDoc=parser.parseFromString(s,"text/xml");
        console.log(xmlDoc);
//        var tmp = (xml2json(xmlDoc));
//        console.log(escape("<\>"));
        var r = {
            "IdentityPolicy":{"DataRegex":"^(<>*)<DNS>(<>*)$","SignerRegex":"^(<>*)<DNS>(<>*)<><NDNCERT>","Op":">=","DataExpand":"\\1\\2","SignerExpand":"\\1\\2","MustVerify":"1"}
        };
        var tt = new X2JS();
        console.log(tt.json2xml_str(r));

        
//        alert(XML.innerHTML);
//        console.log(xmlDoc.getElementsByTagName("IdentityPolicy")[0].getElementsByTagName("DataRegex")[0].childNodes[0].nodeValue);
 
//        console.log(tmp);
//        console.log(xmlDoc.IdentityPolicy.DataRegex);
/*        var pentry = new PolicyEntry(xmlDoc);
        console.log(pentry.dataRegex);
        console.log(pentry.signerRegex);
//        pentry.parse("^(<>*)<DNS>(<>*)$", "^(<>*)<DNS>(<>*)<><NDNCERT>", ">=", "\1\2", "\1\2", "true");
        var _name = new Name("/ndn/ucla/yingdi/DNS/laptop/");
        var _keyloc = new Name("/ndn/ucla/DNS/yingdi/zsk-12345678/NDNCERT/");
        console.log(pentry.checkMatching(_name,_keyloc));
*/ 
//        _name = new Name("/ndn/DNS/ucla.edu/NDNCERT/124");
/*        var backRefManager= new BackRefManager();
        
        topMatcher = new TopMatcher("^(<>*)<DNS>(<>*)<NDNCERT>", backRefManager);
        topMatcher.compile();
        console.log(backRefManager.getNum());
//        console.log(topMatcher);
        //            console.log(patternList);
        console.log(topMatcher.match(_name,0,5));
        console.log(topMatcher.expand("\\1\\2"));
*/ 
    };
    </script>

</head>

<body onload="testName()">
    
    <div id="result" style="font-family: Monaco">
    	
    </div>

</body>
</html>
